---
layout: post
title:  "Agiota Gente Fina"
category: 'Novice'
introduction: Ptolomeu é o agiota mais carismático de MoneyVille. Sem nenhuma razão foi denunciado e acabou indo pra cadeira. A lasqueira foi que ele afirma que quem implementou o software de controle dos empréstimos e de apagar registro de defuntos foi você.
description: 
image: '/assets/agiota/figura.jpg'
tags:
- base
---

Seu Plutolomeu é um agiota que empresta dinheiro a juros 0. Ele é uma pessoa muito carismática e amiga de todos. De sorriso largo sempre aberto, Plutolomeu é amigo da vizinhança. Inclusive esse ano, ele ganhou uma festa de aniversário surpresa de todos os seus devedores. Só quem é gente muito fina ganha festa surpresa né?

**Um, pelo menos foi isso que ele disse pra polícia quando foi pego em flagrante com 50 mil reais escondidos debaixo do colchão!**

Vamos abstrair um pouco da história de Plutolomeu e analisar o sistema de emprestimos que ele tinha instalado em seu computador.

## Funcionalidades

- Iniciar Sistema.
    - Inicia o sistema com uma certa quantidade de dinheiro.
    - Apaga todos os registros de transações que existam.

```
init 500
  done: sistema iniciado com 500 reais
```

- Cadastrar Clientes
    - Cada cliente tem um apelido (clienteId) que é sua chave no sistema e um nome que pode ter várias palavras.
    - Um cliente pode estar vivo ou morto. Quando adicionado ao sistema, o cliente deve estar vivo.

```
nwcli maria maria silva
  done
nwcli josue matos
  done
nwcli maria ana maria silva
  fail: cliente maria ja existe

```

- Emprestar Dinheiro.
    - Uma transação tem um clienteId e um valor numérico.
    - Empréstimos são salvos com valor negativo de transação.
    - Cada transação deve receber do sistema um identificador numérico crescente.
    - A primeira transação tem id 0. A segunda tem id 1 e etc.
    - Ptolomeu não pode emprestar dinheiro se não tiver dinheiro suficiente.
- Mostrar o histórico de transações.

```
emprestar maria 300
  id:0 [maria -300]
emprestar josue 50
  id:1 [josue -50]
emprestar maria 100
  id:2 [maria -50]
emprestar bruno 30
  fail: cliente bruno nao existe
emprestar josue 400
  fail: fundos insuficientes
latran
  id:0 [maria -300]
  id:1 [josue -50]
  id:2 [maria -100]
```

- Mostrar cliente. 
    - Mostra apenas as transacoes daquele cliente e o saldo.
- Mostrar todos os clientes com o saldo de cada um.

```
lscli maria
  id:0 [maria -300]
  id:2 [maria -100]
  saldo: -400
lacli
  maria:maria silva:-400
  josue:josue matos:-50
```

- Receber dinheiro.
    - Clientes pagam os empréstimos aos poucos.
    - Um pagamento entra como transação com valor positivo.
    - O cliente não pode pagar mais do que está devendo.
- Matar um cliente.    
    - As vezes Ptolomeu dá um chá de sumiço em quem não paga suas dívidas. Pra não deixar pontas soltas ele precisa apagar as transações do histórico e remover o cliente da lista. 
    - Apagar as transações não altera o saldo de ptolomeu.

```
receber maria 1000
  fail: valor maior que divida
rebeber maria 350
  id:3 [maria 350]
latran
  id:0 [maria -300]
  id:1 [josue -50]
  id:2 [maria -100]
  id:3 [maria 350]
receber josue 1
  id:4 [josue 1]
receber maria 10
  id:5 [maria 10]
show josue
  id:1 [josue -50]
  id:4 [josue 1]
matar josue
  done
latran
  id:0 [maria -300]
  id:2 [maria -100]
  id:3 [maria 350]
  id:5 [maria 10]
lacli
  maria:maria silva:-40
```

---
- Inicialize o sistema com valores válidos.

## Dicas
- A variável nextTrId guarda o valor do próximo id de transação. Cada nova transação ela aumenta de 1.

## Fim da história

- Então assim ficou Ptolomeu, depois de conseguir explicar pra polícia que tudo não passou me um mal entendido. 
    - *Essa explicação custou 20.000 reais*, mas isso é detalhe, ninguém comenta.

![](/assets/agiota/ptolomeu.jpg)